# PCIe
set_property PACKAGE_PIN AE15 [get_ports perst_n]
set_property IOSTANDARD LVCMOS18 [get_ports perst_n]
set_property PULLUP true [get_ports perst_n]
set_false_path -from [get_ports perst_n]
# PCIE_CLK0_MGT_P=AK10 (bits 0..3), PCIE_CLK1_MGT_P=AT10 (bits 4..7)
set_property PACKAGE_PIN AK10 [get_ports refclk_p]
create_clock -period 10.000 -name sys_clk [get_ports refclk_p]
set_property PACKAGE_PIN AM2 [get_ports per_p[0]]
set_property PACKAGE_PIN AM1 [get_ports per_n[0]]
set_property PACKAGE_PIN AN4 [get_ports per_p[1]]
set_property PACKAGE_PIN AN3 [get_ports per_n[1]]
set_property PACKAGE_PIN AP2 [get_ports per_p[2]]
set_property PACKAGE_PIN AP1 [get_ports per_n[2]]
set_property PACKAGE_PIN AR4 [get_ports per_p[3]]
set_property PACKAGE_PIN AR3 [get_ports per_n[3]]
set_property PACKAGE_PIN AT2 [get_ports per_p[4]]
set_property PACKAGE_PIN AT1 [get_ports per_n[4]]
set_property PACKAGE_PIN AU4 [get_ports per_p[5]]
set_property PACKAGE_PIN AU3 [get_ports per_n[5]]
set_property PACKAGE_PIN AV2 [get_ports per_p[6]]
set_property PACKAGE_PIN AV1 [get_ports per_n[6]]
set_property PACKAGE_PIN AW4 [get_ports per_p[7]]
set_property PACKAGE_PIN AW3 [get_ports per_n[7]]
set_property PACKAGE_PIN AM6 [get_ports pet_p[0]]
set_property PACKAGE_PIN AM5 [get_ports pet_n[0]]
set_property PACKAGE_PIN AN8 [get_ports pet_p[1]]
set_property PACKAGE_PIN AN7 [get_ports pet_n[1]]
set_property PACKAGE_PIN AP6 [get_ports pet_p[2]]
set_property PACKAGE_PIN AP5 [get_ports pet_n[2]]
set_property PACKAGE_PIN AR8 [get_ports pet_p[3]]
set_property PACKAGE_PIN AR7 [get_ports pet_n[3]]
set_property PACKAGE_PIN AT6 [get_ports pet_p[4]]
set_property PACKAGE_PIN AT5 [get_ports pet_n[4]]
set_property PACKAGE_PIN AU8 [get_ports pet_p[5]]
set_property PACKAGE_PIN AU7 [get_ports pet_n[5]]
set_property PACKAGE_PIN AV6 [get_ports pet_p[6]]
set_property PACKAGE_PIN AV5 [get_ports pet_n[6]]
set_property PACKAGE_PIN AW8 [get_ports pet_p[7]]
set_property PACKAGE_PIN AW7 [get_ports pet_n[7]]

# DDR4
set_property PACKAGE_PIN A30 [get_ports ddr_adr[0]]
set_property PACKAGE_PIN D31 [get_ports ddr_adr[1]]
set_property PACKAGE_PIN B30 [get_ports ddr_adr[2]]
set_property PACKAGE_PIN C29 [get_ports ddr_adr[3]]
set_property PACKAGE_PIN C31 [get_ports ddr_adr[4]]
set_property PACKAGE_PIN F29 [get_ports ddr_adr[5]]
set_property PACKAGE_PIN A32 [get_ports ddr_adr[6]]
set_property PACKAGE_PIN J30 [get_ports ddr_adr[7]]
set_property PACKAGE_PIN H33 [get_ports ddr_adr[8]]
set_property PACKAGE_PIN G29 [get_ports ddr_adr[9]]
set_property PACKAGE_PIN E31 [get_ports ddr_adr[10]]
set_property PACKAGE_PIN J33 [get_ports ddr_adr[11]]
set_property PACKAGE_PIN A28 [get_ports ddr_adr[12]]
set_property PACKAGE_PIN H29 [get_ports ddr_adr[13]]
set_property PACKAGE_PIN E32 [get_ports ddr_adr[14]]
set_property PACKAGE_PIN D29 [get_ports ddr_adr[15]]
set_property PACKAGE_PIN D30 [get_ports ddr_adr[16]]
set_property PACKAGE_PIN B32 [get_ports ddr_act_n]
#set_property PACKAGE_PIN G30 [get_ports ddr_alert_n]
set_property PACKAGE_PIN G32 [get_ports ddr_ba[0]]
set_property PACKAGE_PIN E30 [get_ports ddr_ba[1]]
set_property PACKAGE_PIN F32 [get_ports ddr_bg]
set_property PACKAGE_PIN K32 [get_ports ddr_ck_c]
set_property PACKAGE_PIN K31 [get_ports ddr_ck_t]
set_property PACKAGE_PIN C33 [get_ports ddr_cke]
set_property PACKAGE_PIN A29 [get_ports ddr_cs_n]
set_property PACKAGE_PIN H27 [get_ports ddr_dm_dbi_n[0]]
set_property PACKAGE_PIN M25 [get_ports ddr_dm_dbi_n[1]]
set_property PACKAGE_PIN D28 [get_ports ddr_dm_dbi_n[2]]
set_property PACKAGE_PIN P28 [get_ports ddr_dm_dbi_n[3]]
set_property PACKAGE_PIN F38 [get_ports ddr_dm_dbi_n[4]]
set_property PACKAGE_PIN K36 [get_ports ddr_dm_dbi_n[5]]
set_property PACKAGE_PIN E36 [get_ports ddr_dm_dbi_n[6]]
set_property PACKAGE_PIN G35 [get_ports ddr_dm_dbi_n[7]]
#set_property PACKAGE_PIN M31 [get_ports ddr_dm_dbi_n[8]]
set_property PACKAGE_PIN E28 [get_ports ddr_dq[0]]
set_property PACKAGE_PIN G26 [get_ports ddr_dq[1]]
set_property PACKAGE_PIN G27 [get_ports ddr_dq[2]]
set_property PACKAGE_PIN E27 [get_ports ddr_dq[3]]
set_property PACKAGE_PIN J26 [get_ports ddr_dq[4]]
set_property PACKAGE_PIN H26 [get_ports ddr_dq[5]]
set_property PACKAGE_PIN F28 [get_ports ddr_dq[6]]
set_property PACKAGE_PIN F27 [get_ports ddr_dq[7]]
set_property PACKAGE_PIN K26 [get_ports ddr_dq[8]]
set_property PACKAGE_PIN M27 [get_ports ddr_dq[9]]
set_property PACKAGE_PIN K28 [get_ports ddr_dq[10]]
set_property PACKAGE_PIN K27 [get_ports ddr_dq[11]]
set_property PACKAGE_PIN J28 [get_ports ddr_dq[12]]
set_property PACKAGE_PIN N24 [get_ports ddr_dq[13]]
set_property PACKAGE_PIN L27 [get_ports ddr_dq[14]]
set_property PACKAGE_PIN M24 [get_ports ddr_dq[15]]
set_property PACKAGE_PIN B26 [get_ports ddr_dq[16]]
set_property PACKAGE_PIN E26 [get_ports ddr_dq[17]]
set_property PACKAGE_PIN B25 [get_ports ddr_dq[18]]
set_property PACKAGE_PIN B27 [get_ports ddr_dq[19]]
set_property PACKAGE_PIN E25 [get_ports ddr_dq[20]]
set_property PACKAGE_PIN C27 [get_ports ddr_dq[21]]
set_property PACKAGE_PIN A25 [get_ports ddr_dq[22]]
set_property PACKAGE_PIN C26 [get_ports ddr_dq[23]]
set_property PACKAGE_PIN N26 [get_ports ddr_dq[24]]
set_property PACKAGE_PIN R27 [get_ports ddr_dq[25]]
set_property PACKAGE_PIN R28 [get_ports ddr_dq[26]]
set_property PACKAGE_PIN R26 [get_ports ddr_dq[27]]
set_property PACKAGE_PIN P26 [get_ports ddr_dq[28]]
set_property PACKAGE_PIN T28 [get_ports ddr_dq[29]]
set_property PACKAGE_PIN R25 [get_ports ddr_dq[30]]
set_property PACKAGE_PIN T25 [get_ports ddr_dq[31]]
set_property PACKAGE_PIN A38 [get_ports ddr_dq[32]]
set_property PACKAGE_PIN C37 [get_ports ddr_dq[33]]
set_property PACKAGE_PIN B37 [get_ports ddr_dq[34]]
set_property PACKAGE_PIN C39 [get_ports ddr_dq[35]]
set_property PACKAGE_PIN A37 [get_ports ddr_dq[36]]
set_property PACKAGE_PIN E37 [get_ports ddr_dq[37]]
set_property PACKAGE_PIN D39 [get_ports ddr_dq[38]]
set_property PACKAGE_PIN D38 [get_ports ddr_dq[39]]
set_property PACKAGE_PIN K35 [get_ports ddr_dq[40]]
set_property PACKAGE_PIN J39 [get_ports ddr_dq[41]]
set_property PACKAGE_PIN L35 [get_ports ddr_dq[42]]
set_property PACKAGE_PIN K37 [get_ports ddr_dq[43]]
set_property PACKAGE_PIN J35 [get_ports ddr_dq[44]]
set_property PACKAGE_PIN L37 [get_ports ddr_dq[45]]
set_property PACKAGE_PIN J34 [get_ports ddr_dq[46]]
set_property PACKAGE_PIN J38 [get_ports ddr_dq[47]]
set_property PACKAGE_PIN C36 [get_ports ddr_dq[48]]
set_property PACKAGE_PIN B34 [get_ports ddr_dq[49]]
set_property PACKAGE_PIN D35 [get_ports ddr_dq[50]]
set_property PACKAGE_PIN C34 [get_ports ddr_dq[51]]
set_property PACKAGE_PIN E35 [get_ports ddr_dq[52]]
set_property PACKAGE_PIN A34 [get_ports ddr_dq[53]]
set_property PACKAGE_PIN B36 [get_ports ddr_dq[54]]
set_property PACKAGE_PIN D34 [get_ports ddr_dq[55]]
set_property PACKAGE_PIN G39 [get_ports ddr_dq[56]]
set_property PACKAGE_PIN G36 [get_ports ddr_dq[57]]
set_property PACKAGE_PIN H36 [get_ports ddr_dq[58]]
set_property PACKAGE_PIN F37 [get_ports ddr_dq[59]]
set_property PACKAGE_PIN H39 [get_ports ddr_dq[60]]
set_property PACKAGE_PIN G34 [get_ports ddr_dq[61]]
set_property PACKAGE_PIN G37 [get_ports ddr_dq[62]]
set_property PACKAGE_PIN H34 [get_ports ddr_dq[63]]
#set_property PACKAGE_PIN R30 [get_ports ddr_dq[64]]
#set_property PACKAGE_PIN M29 [get_ports ddr_dq[65]]
#set_property PACKAGE_PIN L33 [get_ports ddr_dq[66]]
#set_property PACKAGE_PIN M30 [get_ports ddr_dq[67]]
#set_property PACKAGE_PIN P30 [get_ports ddr_dq[68]]
#set_property PACKAGE_PIN L30 [get_ports ddr_dq[69]]
#set_property PACKAGE_PIN L29 [get_ports ddr_dq[70]]
#set_property PACKAGE_PIN L32 [get_ports ddr_dq[71]]
set_property PACKAGE_PIN F25 [get_ports ddr_dqs_c[0]]
set_property PACKAGE_PIN K25 [get_ports ddr_dqs_c[1]]
set_property PACKAGE_PIN D26 [get_ports ddr_dqs_c[2]]
set_property PACKAGE_PIN P25 [get_ports ddr_dqs_c[3]]
set_property PACKAGE_PIN B39 [get_ports ddr_dqs_c[4]]
set_property PACKAGE_PIN K38 [get_ports ddr_dqs_c[5]]
set_property PACKAGE_PIN A35 [get_ports ddr_dqs_c[6]]
set_property PACKAGE_PIN H38 [get_ports ddr_dqs_c[7]]
#set_property PACKAGE_PIN N29 [get_ports ddr_dqs_c[8]]
set_property PACKAGE_PIN G25 [get_ports ddr_dqs_t[0]]
set_property PACKAGE_PIN L25 [get_ports ddr_dqs_t[1]]
set_property PACKAGE_PIN D25 [get_ports ddr_dqs_t[2]]
set_property PACKAGE_PIN P24 [get_ports ddr_dqs_t[3]]
set_property PACKAGE_PIN C38 [get_ports ddr_dqs_t[4]]
set_property PACKAGE_PIN L38 [get_ports ddr_dqs_t[5]]
set_property PACKAGE_PIN B35 [get_ports ddr_dqs_t[6]]
set_property PACKAGE_PIN H37 [get_ports ddr_dqs_t[7]]
#set_property PACKAGE_PIN P29 [get_ports ddr_dqs_t[8]]
set_property PACKAGE_PIN B31 [get_ports ddr_odt]
set_property PACKAGE_PIN C32 [get_ports ddr_par]
set_property IOSTANDARD LVCMOS12 [get_ports ddr_par]
set_property PACKAGE_PIN H32 [get_ports ddr_reset_n]
set_property PACKAGE_PIN F30 [get_ports ddr_ten]
set_property IOSTANDARD LVCMOS12 [get_ports ddr_ten]
set_property PACKAGE_PIN F33 [get_ports ddr_sys_clk_p]
set_property IOSTANDARD DIFF_HSTL_I_12 [ get_ports ddr_sys_clk_p]
set_property PACKAGE_PIN E33 [get_ports ddr_sys_clk_n]
set_property IOSTANDARD DIFF_HSTL_I_12 [ get_ports ddr_sys_clk_n]

# 0..7 are LEDS 1..8
set_property PACKAGE_PIN J31 [get_ports leds[0]]
set_property PACKAGE_PIN H31 [get_ports leds[1]]
set_property PACKAGE_PIN J29 [get_ports leds[2]]
set_property PACKAGE_PIN G31 [get_ports leds[3]]
set_property PACKAGE_PIN K30 [get_ports leds[4]]
set_property PACKAGE_PIN M26 [get_ports leds[5]]
set_property PACKAGE_PIN L28 [get_ports leds[6]]
set_property PACKAGE_PIN M32 [get_ports leds[7]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[0]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[1]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[2]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[3]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[4]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[5]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[6]]
set_property IOSTANDARD LVCMOS12 [get_ports leds[7]]
set_property DRIVE 4 [get_ports leds[0]]
set_property DRIVE 4 [get_ports leds[1]]
set_property DRIVE 4 [get_ports leds[2]]
set_property DRIVE 4 [get_ports leds[3]]
set_property DRIVE 4 [get_ports leds[4]]
set_property DRIVE 4 [get_ports leds[5]]
set_property DRIVE 4 [get_ports leds[6]]
set_property DRIVE 4 [get_ports leds[7]]

# 0..7 are switches 1..8
set_property PACKAGE_PIN F35 [get_ports switches[0]]
set_property PACKAGE_PIN H28 [get_ports switches[1]]
set_property PACKAGE_PIN J25 [get_ports switches[2]]
set_property PACKAGE_PIN B29 [get_ports switches[3]]
set_property PACKAGE_PIN A33 [get_ports switches[4]]
set_property PACKAGE_PIN E38 [get_ports switches[5]]
set_property PACKAGE_PIN F34 [get_ports switches[6]]
set_property PACKAGE_PIN F39 [get_ports switches[7]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[0]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[1]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[2]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[3]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[4]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[5]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[6]]
set_property IOSTANDARD LVCMOS12 [get_ports switches[7]]

# 0..7 are user IO 1..8
set_property PACKAGE_PIN AV16 [get_ports iocon[0]]
set_property PACKAGE_PIN AW15 [get_ports iocon[1]]
set_property PACKAGE_PIN AV14 [get_ports iocon[2]]
set_property PACKAGE_PIN AW14 [get_ports iocon[3]]
set_property PACKAGE_PIN AU14 [get_ports iocon[4]]
set_property PACKAGE_PIN AT14 [get_ports iocon[5]]
set_property PACKAGE_PIN AU12 [get_ports iocon[6]]
set_property PACKAGE_PIN AV12 [get_ports iocon[7]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[0]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[1]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[2]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[3]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[4]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[5]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[6]]
set_property IOSTANDARD LVCMOS18 [get_ports iocon[7]]
# FIXME: This drive strength might not be correct for general IO
set_property DRIVE 4 [get_ports iocon[0]]
set_property DRIVE 4 [get_ports iocon[1]]
set_property DRIVE 4 [get_ports iocon[2]]
set_property DRIVE 4 [get_ports iocon[3]]
set_property DRIVE 4 [get_ports iocon[4]]
set_property DRIVE 4 [get_ports iocon[5]]
set_property DRIVE 4 [get_ports iocon[6]]
set_property DRIVE 4 [get_ports iocon[7]]

# Configuration
set_property CONFIG_MODE SPIx4 [current_design]
set_property BITSTREAM.CONFIG.CONFIGRATE 50 [current_design]
set_property BITSTREAM.CONFIG.SPI_32BIT_ADDR YES [current_design]
set_property BITSTREAM.CONFIG.SPI_BUSWIDTH 4 [current_design]
set_property BITSTREAM.GENERAL.COMPRESS TRUE [current_design]
set_property CONFIG_VOLTAGE 1.8 [current_design]
set_property CFGBVS GND [current_design]
